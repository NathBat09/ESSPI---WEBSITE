{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import\"./Projects.css\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const Projects=()=>{const[projects,setProjects]=useState([]);const[projectName,setProjectName]=useState('');const[budget,setBudget]=useState('');const[name,setName]=useState('');useEffect(()=>{// Fetch projects from the server\nconst fetchProjects=async()=>{try{const response=await fetch(\"http://localhost:5000/projects\",{method:\"GET\",headers:{jwt_token:localStorage.token}});if(!response.ok){throw new Error(`HTTP error! Status: ${response.status}`);}const projectsData=await response.json();setProjects(projectsData);}catch(error){console.error(\"Error fetching projects:\",error);}};fetchProjects();fetchUserName();},[]);const fetchUserName=async()=>{try{const response=await fetch(\"http://localhost:5000/dashboard/\",{method:\"POST\",headers:{jwt_token:localStorage.token}});const parseRes=await response.json();setName(parseRes.user_name);}catch(err){console.error(err.message);}};const handleDelete=async projectId=>{try{const response=await fetch(`http://localhost:5000/projects/${projectId}`,{method:\"DELETE\",headers:{'Content-Type':'application/json','jwt_token':localStorage.token}});if(!response.ok){throw new Error(`HTTP error! Status: ${response.status}`);}// Update projects state to remove the deleted project\nsetProjects(projects.filter(project=>project.project_id!==projectId));}catch(error){console.error(\"Error deleting project:\",error);}};const handleSubmit=async e=>{e.preventDefault();try{const response=await fetch(\"http://localhost:5000/projects\",{method:\"POST\",headers:{'Content-Type':'application/json','jwt_token':localStorage.token},body:JSON.stringify({project_name:projectName,budget:budget})});if(!response.ok){throw new Error(`HTTP error! Status: ${response.status}`);}const newProject=await response.json();setProjects([...projects,newProject]);setProjectName('');setBudget('');}catch(error){console.error(\"Error adding project:\",error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"projects-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome \",name]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Projects\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Welcome to the Projects page. Below is a list of your projects:\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"project-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Project Name\",value:projectName,onChange:e=>setProjectName(e.target.value),required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"Budget\",value:budget,onChange:e=>setBudget(e.target.value),required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add Project\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"project-buttons-container\",children:projects.length>0?projects.map(project=>/*#__PURE__*/_jsxs(\"div\",{className:\"project-card\",children:[/*#__PURE__*/_jsx(Link,{to:`/projects/${project.project_id}/dashboard`,className:\"project-link\",children:/*#__PURE__*/_jsx(\"button\",{className:\"project-btn\",children:/*#__PURE__*/_jsx(\"span\",{className:\"project-name\",children:project.project_name})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Budget: $\",project.budget]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(project.project_id),className:\"delete-project-btn\",children:\"Delete\"})]},project.project_id)):/*#__PURE__*/_jsx(\"p\",{children:\"No projects available.\"})})]});};export default Projects;","map":{"version":3,"names":["React","useState","useEffect","Link","jsxs","_jsxs","jsx","_jsx","Projects","projects","setProjects","projectName","setProjectName","budget","setBudget","name","setName","fetchProjects","response","fetch","method","headers","jwt_token","localStorage","token","ok","Error","status","projectsData","json","error","console","fetchUserName","parseRes","user_name","err","message","handleDelete","projectId","filter","project","project_id","handleSubmit","e","preventDefault","body","JSON","stringify","project_name","newProject","className","children","onSubmit","type","placeholder","value","onChange","target","required","length","map","to","onClick"],"sources":["C:/Users/user/ESSPI web app/ESSPI---WEBSITE/client/src/components/Projects.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport \"./Projects.css\";\r\n\r\nconst Projects = () => {\r\n  const [projects, setProjects] = useState([]);\r\n  const [projectName, setProjectName] = useState('');\r\n  const [budget, setBudget] = useState('');\r\n  const [name, setName] = useState('');\r\n\r\n  useEffect(() => {\r\n    // Fetch projects from the server\r\n    const fetchProjects = async () => {\r\n      try {\r\n        const response = await fetch(\"http://localhost:5000/projects\", {\r\n          method: \"GET\",\r\n          headers: { jwt_token: localStorage.token }\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error(`HTTP error! Status: ${response.status}`);\r\n        }\r\n\r\n        const projectsData = await response.json();\r\n        setProjects(projectsData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching projects:\", error);\r\n      }\r\n    };\r\n\r\n    fetchProjects();\r\n    fetchUserName();\r\n  }, []);\r\n\r\n  const fetchUserName = async () => {\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/dashboard/\", {\r\n        method: \"POST\",\r\n        headers: { jwt_token: localStorage.token }\r\n      });\r\n\r\n      const parseRes = await response.json();\r\n      setName(parseRes.user_name);\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (projectId) => {\r\n    try {\r\n      const response = await fetch(`http://localhost:5000/projects/${projectId}`, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'jwt_token': localStorage.token,\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n\r\n      // Update projects state to remove the deleted project\r\n      setProjects(projects.filter(project => project.project_id !== projectId));\r\n    } catch (error) {\r\n      console.error(\"Error deleting project:\", error);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      const response = await fetch(\"http://localhost:5000/projects\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'jwt_token': localStorage.token,\r\n        },\r\n        body: JSON.stringify({ project_name: projectName, budget: budget }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP error! Status: ${response.status}`);\r\n      }\r\n\r\n      const newProject = await response.json();\r\n      setProjects([...projects, newProject]);\r\n      setProjectName('');\r\n      setBudget('');\r\n\r\n    } catch (error) {\r\n      console.error(\"Error adding project:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"projects-container\">\r\n      <div className=\"header\">\r\n        <h1>Welcome {name}</h1>\r\n      </div>\r\n      <div className=\"form-container\">\r\n        <h2>Projects</h2>\r\n        <p>Welcome to the Projects page. Below is a list of your projects:</p>\r\n        {/* Project Form */}\r\n        <form onSubmit={handleSubmit} className=\"project-form\">\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Project Name\"\r\n            value={projectName}\r\n            onChange={(e) => setProjectName(e.target.value)}\r\n            required\r\n          />\r\n          <input\r\n            type=\"number\"\r\n            placeholder=\"Budget\"\r\n            value={budget}\r\n            onChange={(e) => setBudget(e.target.value)}\r\n            required\r\n          />\r\n          <button type=\"submit\">Add Project</button>\r\n        </form>\r\n      </div>\r\n\r\n      {/* List of Projects as Buttons */}\r\n      <div className=\"project-buttons-container\">\r\n        {projects.length > 0 ? (\r\n          projects.map(project => (\r\n            <div key={project.project_id} className=\"project-card\">\r\n              <Link to={`/projects/${project.project_id}/dashboard`} className=\"project-link\">\r\n                <button className=\"project-btn\">\r\n                  <span className=\"project-name\">{project.project_name}</span>\r\n                </button>\r\n              </Link>\r\n              <br/>\r\n              <span>Budget: ${project.budget}</span>\r\n              <br/>\r\n              <br/>\r\n              <button onClick={() => handleDelete(project.project_id)} className=\"delete-project-btn\">\r\n                Delete\r\n              </button>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p>No projects available.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Projects;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}