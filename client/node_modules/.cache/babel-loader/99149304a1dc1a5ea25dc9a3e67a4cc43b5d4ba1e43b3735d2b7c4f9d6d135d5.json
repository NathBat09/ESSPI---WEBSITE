{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\ESSPI web app\\\\ESSPI---WEBSITE\\\\client\\\\src\\\\components\\\\ProjectDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport CalculationComponent from './ESSPI_Calculator.js';\nimport { toast } from 'react-toastify';\nimport CalculationModal from './AddNewCalculationForm.js';\nimport BarCharts from './BarCharts.js';\nimport './global.css';\nimport Modal from './modal.js';\nimport STESSPIImage from '../images/ESSPI.png';\nimport { useHistory } from 'react-router-dom';\nimport Navbar from './Navbar.js';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  v4: uuidv4\n} = require('uuid'); // Import uuidv4 for generating unique IDs\n\nconst ProjectDashboard = ({\n  projectId,\n  setAuth\n}) => {\n  _s();\n  const history = useHistory();\n  const [name, setName] = useState('');\n  const [calculations, setCalculations] = useState([]);\n  const [showCalculationModal, setShowCalculationModal] = useState(true);\n  const [newCalculation, setNewCalculation] = useState({\n    max_critical_recovery_time: '',\n    complete_recovery_time: '',\n    power_consumption: '',\n    element_name: '',\n    category: '',\n    ampere: '',\n    volts: '',\n    name: '',\n    quantity: ''\n  });\n  const [pvSystemData, setPVSystemData] = useState({\n    duration: '',\n    peaksunhours: '',\n    batterytype: ''\n  });\n  const [batterySize, setBatterySize] = useState({});\n  const [pvSystemSize, setPVSystemSize] = useState({});\n  const [showModal, setShowModal] = useState(true);\n  const [showCalculator, setShowCalculator] = useState(false);\n  const [pvSystemError, setPVSystemError] = useState(null);\n  const [projectName, setProjectName] = useState('');\n  const [budget, setBudget] = useState('');\n  const [projects, setProjects] = useState([]);\n  const calculatePercentageDifference = (budget, cost) => {\n    return (cost / budget * 100).toFixed(2);\n  };\n  const toggleCalculatorModal = () => {\n    setShowCalculator(prevState => !prevState);\n  };\n  const calculateVLE = calculations => {\n    let CLE = 0;\n    let ELE = 0;\n    for (const calculation of calculations) {\n      if (calculation.category === \"CL\") {\n        CLE += calculation.power_consumption;\n      } else if (calculation.category === \"EL\") {\n        ELE += calculation.power_consumption;\n      }\n    }\n    return CLE + ELE;\n  };\n  const calculateSLE = calculations => {\n    let DLE = 0;\n    let NELE = 0;\n    for (const calculation of calculations) {\n      if (calculation.category === \"DL\") {\n        DLE += calculation.power_consumption;\n      } else if (calculation.category === \"NEL\") {\n        NELE += calculation.power_consumption;\n      }\n    }\n    return DLE + NELE;\n  };\n  const calculateSTESSPI = (calculation, VLE) => {\n    let power = calculation.power_consumption;\n    if (calculation.power_consumption === 0 && calculation.ampere > 0 && calculation.volts > 0) {\n      power = calculation.ampere * calculation.volts;\n    }\n    if (calculation.max_critical_recovery_time > 0 && VLE > 0 && (calculation.category === \"CL\" || calculation.category === \"EL\")) {\n      return power / VLE * (calculation.complete_recovery_time / calculation.max_critical_recovery_time);\n    }\n    return 0;\n  };\n  const calculateMTESSPI = (calculation, VLE, SLE) => {\n    let power = calculation.power_consumption;\n    if (calculation.power_consumption === 0 && calculation.ampere > 0 && calculation.volts > 0) {\n      power = calculation.ampere * calculation.volts;\n    }\n    if (calculation.max_critical_recovery_time > 0 && SLE > 0 && (calculation.category === \"DL\" || calculation.category === \"NEL\")) {\n      return power / (VLE + SLE) * (calculation.complete_recovery_time / calculation.max_critical_recovery_time);\n    }\n    return 0;\n  };\n  useEffect(() => {\n    fetchUserName();\n    fetchCalculations();\n    fetchPVSystemData();\n  }, []);\n  useEffect(() => {\n    const fetchProjects = async () => {\n      try {\n        const response = await fetch(\"https://serverside-79597717194.us-central1.run.app/projects\", {\n          method: \"GET\",\n          headers: {\n            jwt_token: localStorage.token\n          }\n        });\n        if (!response.ok) {\n          throw new Error(`HTTP error! Status: ${response.status}`);\n        }\n        const projectsData = await response.json();\n        setProjects(projectsData);\n      } catch (error) {\n        console.error(\"Error fetching projects:\", error);\n      }\n    };\n    fetchProjects();\n  }, []);\n  useEffect(() => {\n    const project = projects.find(project => project.project_id === projectId);\n    if (project) {\n      setProjectName(project.project_name);\n      setBudget(project.budget);\n    }\n  }, [projects, projectId]);\n  const fetchUserName = async () => {\n    try {\n      const response = await fetch(\"https://serverside-79597717194.us-central1.run.app/dashboard/\", {\n        method: \"POST\",\n        headers: {\n          jwt_token: localStorage.token\n        }\n      });\n      const parseRes = await response.json();\n      setName(parseRes.user_name);\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const fetchCalculations = async () => {\n    try {\n      const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations`, {\n        method: \"GET\",\n        headers: {\n          jwt_token: localStorage.token\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const calculationsData = await response.json();\n      setCalculations(calculationsData);\n    } catch (error) {\n      console.error(\"Error fetching calculations:\", error.message);\n    }\n  };\n  const fetchPVSystemData = async () => {\n    try {\n      const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/pvsystems`, {\n        method: \"GET\",\n        headers: {\n          jwt_token: localStorage.token\n        }\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const pvSystemData = await response.json();\n      setPVSystemData(pvSystemData);\n    } catch (error) {\n      console.error(\"Error fetching PV system data:\", error.message);\n    }\n  };\n  const closeCalculationModal = () => {\n    setShowCalculationModal(false);\n  };\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    console.log(`Input changed - Name: ${name}, Value: ${value}`);\n    setNewCalculation(prevCalculation => ({\n      ...prevCalculation,\n      [name]: value\n    }));\n  };\n  const minimumE = () => {\n    let CLE = 0;\n    for (const calculation of calculations) {\n      if (calculation.category === \"CL\") {\n        CLE += calculation.power_consumption;\n      }\n    }\n    return CLE;\n  };\n  const handlePVSystemInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    const parsedValue = name === 'duration' || name === 'peaksunhours' ? parseFloat(value) : value;\n    setPVSystemData(prevData => ({\n      ...prevData,\n      [name]: parsedValue\n    }));\n  };\n  const handlePVSubmit = async e => {\n    e.preventDefault();\n    try {\n      const pvSystemPayload = {\n        duration: pvSystemData.duration,\n        peaksunhours: pvSystemData.peaksunhours,\n        batterytype: pvSystemData.batterytype,\n        pvId: uuidv4() // Generate a unique ID for the PV system\n      };\n      const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/pvsystems`, {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json',\n          'jwt_token': localStorage.token\n        },\n        body: JSON.stringify(pvSystemPayload) // Send the payload containing all necessary fields\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n      const data = await response.json();\n      if (data.message === \"PV System added successfully!\") {\n        toast.success(data.message);\n        setPVSystemError(null);\n        setPVSystemData({\n          duration: '',\n          peaksunhours: '',\n          batterytype: ''\n        });\n      }\n    } catch (error) {\n      console.error(\"Error adding PV system:\", error.message);\n      setPVSystemError(\"Failed to add PV system. Please try again.\");\n    }\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    let calculatedPowerConsumption = newCalculation.power_consumption;\n    if (newCalculation.quantity !== 0) {\n      calculatedPowerConsumption *= newCalculation.quantity;\n    }\n    const updatedCalculation = {\n      ...newCalculation,\n      power_consumption: calculatedPowerConsumption\n    };\n    try {\n      // Add new calculation\n      const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations`, {\n        method: \"POST\",\n        headers: {\n          'Content-Type': 'application/json',\n          'jwt_token': localStorage.token\n        },\n        body: JSON.stringify(updatedCalculation)\n      });\n      if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n      }\n\n      // Fetch all calculations including the newly added one\n      await fetchCalculations();\n\n      // Recalculate stesspi and mtesspi for all calculations\n      const VLE = calculateVLE(calculations);\n      const SLE = calculateSLE(calculations);\n      for (const calculation of calculations) {\n        const newSTESSPI = calculateSTESSPI(calculation, VLE).toFixed(2);\n        const newMTESSPI = calculateMTESSPI(calculation, VLE, SLE).toFixed(2);\n        console.log(newSTESSPI, newMTESSPI);\n\n        // Update the calculation with the new stesspi and mtesspi values\n        await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations/${calculation.calculation_id}`, {\n          method: \"PUT\",\n          headers: {\n            'Content-Type': 'application/json',\n            'jwt_token': localStorage.token\n          },\n          body: JSON.stringify({\n            stesspi: newSTESSPI,\n            mtesspi: newMTESSPI\n          })\n        });\n      }\n      setNewCalculation({\n        max_critical_recovery_time: '',\n        complete_recovery_time: '',\n        power_consumption: '',\n        ampere: '',\n        volts: '',\n        name: '',\n        category: '',\n        quantity: ''\n      });\n    } catch (error) {\n      console.error(\"Error adding a new calculation:\", error.message);\n    }\n  };\n  const calculateBatterySize = duration => {\n    let minimum, BS_SHORT, BS_MID;\n    if (pvSystemData.batterytype === \"lithium\") {\n      minimum = minimumE(calculations) * duration * 1.2;\n      BS_SHORT = calculateVLE(calculations) * duration * 1.2;\n      BS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) * duration * 1.2;\n    } else if (pvSystemData.batterytype === \"lead\") {\n      minimum = minimumE(calculations) * duration * 1.75;\n      BS_SHORT = calculateVLE(calculations) * duration * 1.75;\n      BS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) * duration * 1.75;\n    }\n    const m_cost = minimum * 271;\n    const CS_SHORT = BS_SHORT * 271;\n    const CS_MID = BS_MID * 271;\n    return {\n      minimum,\n      BS_SHORT,\n      BS_MID,\n      m_cost,\n      CS_SHORT,\n      CS_MID\n    };\n  };\n  const calculatePVSystemSize = duration => {\n    let minimum, PVSS_SHORT, PVSS_MID;\n    minimum = minimumE(calculations) / pvSystemData.peaksunhours;\n    PVSS_SHORT = calculateVLE(calculations) / pvSystemData.peaksunhours;\n    PVSS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) / pvSystemData.peaksunhours;\n    const PV_min = minimum * 0.75 * 1000;\n    const PVSC_SHORT = PVSS_SHORT * 0.75 * 1000;\n    const PVSC_MID = PVSS_MID * 0.75 * 1000;\n    return {\n      minimum,\n      PVSS_SHORT,\n      PVSS_MID,\n      PV_min,\n      PVSC_SHORT,\n      PVSC_MID\n    };\n  };\n  useEffect(() => {\n    if (pvSystemData.duration && pvSystemData.peaksunhours && pvSystemData.batterytype) {\n      const batterySize = calculateBatterySize(pvSystemData.duration);\n      const pvSystemSize = calculatePVSystemSize(pvSystemData.duration);\n      setBatterySize(batterySize);\n      setPVSystemSize(pvSystemSize);\n    }\n  }, [pvSystemData, calculations]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"first-div\",\n    children: [showModal && /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: showModal,\n      setIsOpen: setShowModal,\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: STESSPIImage,\n        alt: \"ESSPI\",\n        style: {\n          width: '1000px',\n          height: 'auto'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"project-info-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"project-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"project-title\",\n          children: [projectName, \" Dashboard\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"project-budget\",\n          children: [\"Budget: $\", budget]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"toggle-button-container\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"toggle-button\",\n        onClick: toggleCalculatorModal,\n        children: \"Calculator Button\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: showCalculator,\n      setIsOpen: setShowCalculator,\n      children: /*#__PURE__*/_jsxDEV(CalculationModal, {\n        show: showCalculationModal,\n        onClose: closeCalculationModal,\n        newCalculation: newCalculation,\n        handleInputChange: handleInputChange,\n        handleSubmit: handleSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 13\n    }, this), calculations.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(BarCharts, {\n        calculations: calculations\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(CalculationComponent, {\n        calculations: calculations,\n        projectId: projectId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"PV Systems and cost analysis\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form-container\",\n        onSubmit: handlePVSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Duration (hr):\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"duration\",\n            value: pvSystemData.duration,\n            onChange: handlePVSystemInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Peak Sun Hours:\", /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            name: \"peaksunhours\",\n            value: pvSystemData.peaksunhours,\n            onChange: handlePVSystemInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: [\"Battery Type:\", /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"batterytype\",\n            value: pvSystemData.batterytype,\n            onChange: handlePVSystemInputChange,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Select Battery Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"lead\",\n              children: \"Lead\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"lithium\",\n              children: \"Lithium\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Submit PV System Data\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calculated-values-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Battery Size\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"value-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Minimum: \", batterySize.minimum, \" kWh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Short Term: \", batterySize.BS_SHORT, \" kWh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Mid Term: \", batterySize.BS_MID, \" kWh\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Battery Cost\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"value-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Minimum: $\", batterySize.m_cost]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Short Term: $\", batterySize.CS_SHORT]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 452,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Mid Term: $\", batterySize.CS_MID]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"calculated-values-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"PV System Size\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"value-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Minimum: \", pvSystemSize.minimum, \" kW\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 460,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Short Term: \", pvSystemSize.PVSS_SHORT, \" kW\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Mid Term: \", pvSystemSize.PVSS_MID, \" kW\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"PV System Cost\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"value-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Minimum: $\", pvSystemSize.PV_min]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Short Term: $\", pvSystemSize.PVSC_SHORT]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 467,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Mid Term: $\", pvSystemSize.PVSC_MID]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 468,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress-bars-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Progress Bars\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  Minimum Battery Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, batterySize.m_cost)}%`,\n                backgroundColor: calculatePercentageDifference(budget, batterySize.m_cost) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [\" \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", calculatePercentageDifference(budget, batterySize.m_cost), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"see\",\n            children: \"  Short Term Battery Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 486,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, batterySize.CS_SHORT)}%`,\n                backgroundColor: calculatePercentageDifference(budget, batterySize.CS_SHORT) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"see\",\n            children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", calculatePercentageDifference(budget, batterySize.CS_SHORT), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 485,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  Mid Term Battery Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 496,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, batterySize.CS_MID)}%`,\n                backgroundColor: calculatePercentageDifference(budget, batterySize.CS_MID) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 497,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"see\",\n            children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", calculatePercentageDifference(budget, batterySize.CS_MID), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 495,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  Minimum PV System Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 506,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, pvSystemSize.PV_min)}%`,\n                backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PV_min) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [calculatePercentageDifference(budget, pvSystemSize.PV_min), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 513,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 505,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  Short Term PV System Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT)}%`,\n                backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 518,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 515,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"  Mid Term PV System Cost\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 526,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${calculatePercentageDifference(budget, pvSystemSize.PVSC_MID)}%`,\n                backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PVSC_MID) >= 50 ? 'blue' : 'red'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 527,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [calculatePercentageDifference(budget, pvSystemSize.PVSC_MID), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 525,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Waiting for the elements...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 538,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 386,\n    columnNumber: 9\n  }, this);\n};\n_s(ProjectDashboard, \"q/3lJ20ExGue8exWxRgcC0BzMME=\", false, function () {\n  return [useHistory];\n});\n_c = ProjectDashboard;\nexport default ProjectDashboard;\nvar _c;\n$RefreshReg$(_c, \"ProjectDashboard\");","map":{"version":3,"names":["React","useState","useEffect","CalculationComponent","toast","CalculationModal","BarCharts","Modal","STESSPIImage","useHistory","Navbar","jsxDEV","_jsxDEV","Fragment","_Fragment","v4","uuidv4","require","ProjectDashboard","projectId","setAuth","_s","history","name","setName","calculations","setCalculations","showCalculationModal","setShowCalculationModal","newCalculation","setNewCalculation","max_critical_recovery_time","complete_recovery_time","power_consumption","element_name","category","ampere","volts","quantity","pvSystemData","setPVSystemData","duration","peaksunhours","batterytype","batterySize","setBatterySize","pvSystemSize","setPVSystemSize","showModal","setShowModal","showCalculator","setShowCalculator","pvSystemError","setPVSystemError","projectName","setProjectName","budget","setBudget","projects","setProjects","calculatePercentageDifference","cost","toFixed","toggleCalculatorModal","prevState","calculateVLE","CLE","ELE","calculation","calculateSLE","DLE","NELE","calculateSTESSPI","VLE","power","calculateMTESSPI","SLE","fetchUserName","fetchCalculations","fetchPVSystemData","fetchProjects","response","fetch","method","headers","jwt_token","localStorage","token","ok","Error","status","projectsData","json","error","console","project","find","project_id","project_name","parseRes","user_name","err","message","calculationsData","closeCalculationModal","handleInputChange","e","value","target","log","prevCalculation","minimumE","handlePVSystemInputChange","parsedValue","parseFloat","prevData","handlePVSubmit","preventDefault","pvSystemPayload","pvId","body","JSON","stringify","data","success","handleSubmit","calculatedPowerConsumption","updatedCalculation","newSTESSPI","newMTESSPI","calculation_id","stesspi","mtesspi","calculateBatterySize","minimum","BS_SHORT","BS_MID","m_cost","CS_SHORT","CS_MID","calculatePVSystemSize","PVSS_SHORT","PVSS_MID","PV_min","PVSC_SHORT","PVSC_MID","className","children","isOpen","setIsOpen","src","alt","style","width","height","fileName","_jsxFileName","lineNumber","columnNumber","onClick","show","onClose","length","onSubmit","type","onChange","backgroundColor","_c","$RefreshReg$"],"sources":["C:/Users/user/ESSPI web app/ESSPI---WEBSITE/client/src/components/ProjectDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport CalculationComponent from './ESSPI_Calculator.js';\r\nimport { toast } from 'react-toastify';\r\nimport CalculationModal from './AddNewCalculationForm.js';\r\nimport BarCharts from './BarCharts.js';\r\nimport './global.css';\r\nimport Modal from './modal.js';\r\nimport STESSPIImage from '../images/ESSPI.png';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Navbar from './Navbar.js';\r\nconst { v4: uuidv4 } = require('uuid'); // Import uuidv4 for generating unique IDs\r\n\r\n\r\nconst ProjectDashboard = ({ projectId, setAuth }) => {\r\n    const history = useHistory();\r\n    const [name, setName] = useState('');\r\n    const [calculations, setCalculations] = useState([]);\r\n    const [showCalculationModal, setShowCalculationModal] = useState(true); \r\n    const [newCalculation, setNewCalculation] = useState({\r\n        max_critical_recovery_time: '',\r\n        complete_recovery_time: '',\r\n        power_consumption: '',\r\n        element_name: '',\r\n        category: '',\r\n        ampere: '',\r\n        volts: '',\r\n        name: '',\r\n        quantity: '',\r\n    });\r\n    const [pvSystemData, setPVSystemData] = useState({\r\n        duration: '',\r\n        peaksunhours: '',\r\n        batterytype: '',\r\n    });\r\n    const [batterySize, setBatterySize] = useState({});\r\n    const [pvSystemSize, setPVSystemSize] = useState({});\r\n    const [showModal, setShowModal] = useState(true);\r\n    const [showCalculator, setShowCalculator] = useState(false);\r\n    const [pvSystemError, setPVSystemError] = useState(null);\r\n    const [projectName, setProjectName] = useState('');\r\n    const [budget, setBudget] = useState('');\r\n    const [projects, setProjects] = useState([]);\r\n\r\n    const calculatePercentageDifference = (budget, cost) => {\r\n        return ((cost / budget) * 100).toFixed(2);\r\n    };\r\n  \r\n    const toggleCalculatorModal = () => {\r\n        setShowCalculator(prevState => !prevState);\r\n    };\r\n\r\n    const calculateVLE = (calculations) => {\r\n        let CLE = 0; \r\n        let ELE = 0; \r\n    \r\n        for (const calculation of calculations) {\r\n            if (calculation.category === \"CL\") {\r\n                CLE += calculation.power_consumption;\r\n            } else if (calculation.category === \"EL\") {\r\n                ELE += calculation.power_consumption;\r\n            }\r\n        }\r\n    \r\n        return CLE + ELE;\r\n    };\r\n    \r\n    const calculateSLE = (calculations) => {\r\n        let DLE = 0; \r\n        let NELE = 0; \r\n    \r\n        for (const calculation of calculations) {\r\n            if (calculation.category === \"DL\") {\r\n                DLE += calculation.power_consumption;\r\n            } else if (calculation.category === \"NEL\") {\r\n                NELE += calculation.power_consumption;\r\n            }\r\n        }\r\n    \r\n        return DLE + NELE;\r\n    };\r\n    \r\n    const calculateSTESSPI = (calculation, VLE) => {\r\n        let power = calculation.power_consumption;\r\n        if (calculation.power_consumption === 0 && calculation.ampere > 0 && calculation.volts > 0) {\r\n        power = calculation.ampere * calculation.volts;\r\n        }\r\n    \r\n        if (\r\n        (calculation.max_critical_recovery_time > 0 && VLE > 0) &&\r\n        (calculation.category === \"CL\" || calculation.category === \"EL\")\r\n        ) {\r\n            \r\n        return (\r\n            (power / VLE) *\r\n            (calculation.complete_recovery_time / calculation.max_critical_recovery_time)\r\n        );\r\n        }\r\n        return 0;\r\n    };\r\n    \r\n    const calculateMTESSPI = (calculation, VLE, SLE) => {\r\n        let power = calculation.power_consumption;\r\n        if (calculation.power_consumption === 0 && calculation.ampere > 0 && calculation.volts > 0) {\r\n            power = calculation.ampere * calculation.volts;\r\n        }\r\n      \r\n        if (\r\n            (calculation.max_critical_recovery_time > 0 && SLE > 0) &&\r\n            (calculation.category === \"DL\" || calculation.category === \"NEL\")\r\n        ) {\r\n            return (\r\n                (power / (VLE + SLE)) *\r\n                (calculation.complete_recovery_time / calculation.max_critical_recovery_time)\r\n            );\r\n        }\r\n        return 0;\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchUserName();\r\n        fetchCalculations();\r\n        fetchPVSystemData();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        const fetchProjects = async () => {\r\n          try {\r\n            const response = await fetch(\"https://serverside-79597717194.us-central1.run.app/projects\", {\r\n              method: \"GET\",\r\n              headers: { jwt_token: localStorage.token }\r\n            });\r\n    \r\n            if (!response.ok) {\r\n              throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n    \r\n            const projectsData = await response.json();\r\n            setProjects(projectsData);\r\n          } catch (error) {\r\n            console.error(\"Error fetching projects:\", error);\r\n          }\r\n        };\r\n    \r\n        fetchProjects();\r\n      }, []);\r\n    \r\n      useEffect(() => {\r\n        const project = projects.find(project => project.project_id === projectId);\r\n        if (project) {\r\n          setProjectName(project.project_name);\r\n          setBudget(project.budget);\r\n        }\r\n      }, [projects, projectId]);\r\n\r\n    const fetchUserName = async () => {\r\n        try {\r\n            const response = await fetch(\"https://serverside-79597717194.us-central1.run.app/dashboard/\", {\r\n                method: \"POST\",\r\n                headers: { jwt_token: localStorage.token }\r\n            });\r\n\r\n            const parseRes = await response.json();\r\n            setName(parseRes.user_name);\r\n        } catch (err) {\r\n            console.error(err.message);\r\n        }\r\n    };\r\n\r\n    const fetchCalculations = async () => {\r\n        try {\r\n            const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations`, {\r\n                method: \"GET\",\r\n                headers: { jwt_token: localStorage.token }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            const calculationsData = await response.json();\r\n            setCalculations(calculationsData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching calculations:\", error.message);\r\n        }\r\n    };\r\n\r\n    const fetchPVSystemData = async () => {\r\n        try {\r\n            const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/pvsystems`, {\r\n                method: \"GET\",\r\n                headers: { jwt_token: localStorage.token }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            const pvSystemData = await response.json();\r\n            setPVSystemData(pvSystemData);\r\n        } catch (error) {\r\n            console.error(\"Error fetching PV system data:\", error.message);\r\n        }\r\n    };\r\n\r\n    const closeCalculationModal = () => {\r\n        setShowCalculationModal(false);\r\n    };\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        console.log(`Input changed - Name: ${name}, Value: ${value}`);\r\n        setNewCalculation((prevCalculation) => ({\r\n            ...prevCalculation,\r\n            [name]: value,\r\n        }));\r\n    };\r\n\r\n    const minimumE = () => {\r\n        let CLE = 0; \r\n        for (const calculation of calculations) {\r\n            if (calculation.category === \"CL\") {\r\n                CLE += calculation.power_consumption; \r\n            }\r\n        }\r\n        return CLE;\r\n    };\r\n\r\n    const handlePVSystemInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        const parsedValue = name === 'duration' || name === 'peaksunhours' ? parseFloat(value) : value;\r\n        setPVSystemData((prevData) => ({\r\n            ...prevData,\r\n            [name]: parsedValue,\r\n        }));\r\n    };\r\n\r\n    const handlePVSubmit = async (e) => {\r\n        e.preventDefault();\r\n    \r\n        try {\r\n            const pvSystemPayload = {\r\n                duration: pvSystemData.duration,\r\n                peaksunhours: pvSystemData.peaksunhours,\r\n                batterytype: pvSystemData.batterytype,\r\n                pvId: uuidv4(), // Generate a unique ID for the PV system\r\n            };\r\n    \r\n            const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/pvsystems`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'jwt_token': localStorage.token,\r\n                },\r\n                body: JSON.stringify(pvSystemPayload), // Send the payload containing all necessary fields\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            const data = await response.json();\r\n            if (data.message === \"PV System added successfully!\") {\r\n                toast.success(data.message);\r\n                setPVSystemError(null);\r\n                setPVSystemData({\r\n                    duration: '',\r\n                    peaksunhours: '',\r\n                    batterytype: '',\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error adding PV system:\", error.message);\r\n            setPVSystemError(\"Failed to add PV system. Please try again.\");\r\n        }\r\n    };\r\n    \r\n    \r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        let calculatedPowerConsumption = newCalculation.power_consumption;\r\n        if (newCalculation.quantity !== 0) {\r\n            calculatedPowerConsumption *= newCalculation.quantity;\r\n        }\r\n\r\n        const updatedCalculation = { ...newCalculation, power_consumption: calculatedPowerConsumption };\r\n\r\n        try {\r\n            // Add new calculation\r\n            const response = await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    'Content-Type': 'application/json',\r\n                    'jwt_token': localStorage.token,\r\n                },\r\n                body: JSON.stringify(updatedCalculation),\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error(`HTTP error! Status: ${response.status}`);\r\n            }\r\n\r\n            // Fetch all calculations including the newly added one\r\n            await fetchCalculations();\r\n\r\n            // Recalculate stesspi and mtesspi for all calculations\r\n            const VLE = calculateVLE(calculations);\r\n            const SLE = calculateSLE(calculations);\r\n\r\n            for (const calculation of calculations) {\r\n                const newSTESSPI = calculateSTESSPI(calculation, VLE).toFixed(2);\r\n                const newMTESSPI = calculateMTESSPI(calculation, VLE, SLE).toFixed(2);\r\n                console.log(newSTESSPI, newMTESSPI)\r\n\r\n                // Update the calculation with the new stesspi and mtesspi values\r\n                await fetch(`https://serverside-79597717194.us-central1.run.app/projects/${projectId}/calculations/${calculation.calculation_id}`, {\r\n                    method: \"PUT\",\r\n                    headers: {\r\n                        'Content-Type': 'application/json',\r\n                        'jwt_token': localStorage.token,\r\n                    },\r\n                    body: JSON.stringify({ stesspi: newSTESSPI, mtesspi: newMTESSPI }),\r\n                });\r\n            }\r\n\r\n            setNewCalculation({\r\n                max_critical_recovery_time: '',\r\n                complete_recovery_time: '',\r\n                power_consumption: '',\r\n                ampere: '',\r\n                volts: '',\r\n                name: '',\r\n                category: '',\r\n                quantity: '',\r\n            });\r\n\r\n        } catch (error) {\r\n            console.error(\"Error adding a new calculation:\", error.message);\r\n        }\r\n    };\r\n\r\n    const calculateBatterySize = (duration) => {\r\n        let minimum, BS_SHORT, BS_MID;\r\n\r\n        if (pvSystemData.batterytype === \"lithium\") {\r\n            minimum = minimumE(calculations) * duration * 1.2;\r\n            BS_SHORT = calculateVLE(calculations) * duration * 1.2;\r\n            BS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) * duration * 1.2;\r\n        } else if (pvSystemData.batterytype === \"lead\") {\r\n            minimum = minimumE(calculations) * duration * 1.75;\r\n            BS_SHORT = calculateVLE(calculations) * duration * 1.75;\r\n            BS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) * duration * 1.75;\r\n        }\r\n        const m_cost = minimum * 271;\r\n        const CS_SHORT = BS_SHORT * 271;\r\n        const CS_MID = BS_MID * 271;\r\n\r\n        return { minimum, BS_SHORT, BS_MID, m_cost, CS_SHORT, CS_MID};\r\n    };\r\n\r\n    const calculatePVSystemSize = (duration) => {\r\n        let minimum, PVSS_SHORT, PVSS_MID;\r\n        \r\n        minimum = minimumE(calculations) / pvSystemData.peaksunhours;\r\n        PVSS_SHORT = calculateVLE(calculations) / pvSystemData.peaksunhours;\r\n        PVSS_MID = (calculateVLE(calculations) + calculateSLE(calculations)) / pvSystemData.peaksunhours;\r\n\r\n        const PV_min = minimum * 0.75 * 1000;\r\n        const PVSC_SHORT = PVSS_SHORT * 0.75*1000;\r\n        const PVSC_MID = PVSS_MID * 0.75*1000;\r\n\r\n        return { minimum, PVSS_SHORT, PVSS_MID, PV_min, PVSC_SHORT, PVSC_MID};\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (pvSystemData.duration && pvSystemData.peaksunhours && pvSystemData.batterytype) {\r\n            const batterySize = calculateBatterySize(pvSystemData.duration);\r\n            const pvSystemSize = calculatePVSystemSize(pvSystemData.duration);\r\n            setBatterySize(batterySize);\r\n            setPVSystemSize(pvSystemSize);\r\n        }\r\n    }, [pvSystemData, calculations]);\r\n\r\n    return (\r\n        <div className=\"first-div\">\r\n            {showModal && (\r\n                <Modal isOpen={showModal} setIsOpen={setShowModal}>\r\n                    <img src={STESSPIImage} alt=\"ESSPI\" style={{ width: '1000px', height: 'auto' }}/>  \r\n                    <br/>      \r\n                </Modal>\r\n            )}\r\n            <div className=\"project-info-container\">\r\n                <div className=\"project-info\">\r\n                    <h2 className=\"project-title\">{projectName} Dashboard</h2>\r\n                    <h3 className=\"project-budget\">Budget: ${budget}</h3>\r\n                </div>\r\n            </div>\r\n            <div className=\"toggle-button-container\">\r\n                <button className=\"toggle-button\" onClick={toggleCalculatorModal}>Calculator Button</button>\r\n            </div>\r\n    \r\n            <Modal isOpen={showCalculator} setIsOpen={setShowCalculator}>\r\n                <CalculationModal\r\n                    show={showCalculationModal}\r\n                    onClose={closeCalculationModal}\r\n                    newCalculation={newCalculation}\r\n                    handleInputChange={handleInputChange}\r\n                    handleSubmit={handleSubmit}\r\n                />\r\n            </Modal>\r\n            \r\n            <br/>\r\n            {calculations.length > 0 ? (\r\n                <>\r\n                    <br/>\r\n                    <BarCharts calculations={calculations} />\r\n                    <br/>\r\n                    <CalculationComponent calculations={calculations} projectId={projectId} />\r\n                    <br/>\r\n                    <h2>PV Systems and cost analysis</h2>\r\n                    <form className=\"form-container\" onSubmit={handlePVSubmit}>\r\n                        <label>\r\n                            Duration (hr):\r\n                            <input type=\"number\" name=\"duration\" value={pvSystemData.duration} onChange={handlePVSystemInputChange} />\r\n                        </label>\r\n                        <label>\r\n                            Peak Sun Hours:\r\n                            <input type=\"number\" name=\"peaksunhours\" value={pvSystemData.peaksunhours} onChange={handlePVSystemInputChange} />\r\n                        </label>\r\n                        <label>\r\n                            Battery Type:\r\n                            <select name=\"batterytype\" value={pvSystemData.batterytype} onChange={handlePVSystemInputChange}>\r\n                                <option value=\"\">Select Battery Type</option>\r\n                                <option value=\"lead\">Lead</option>\r\n                                <option value=\"lithium\">Lithium</option>\r\n                            </select>\r\n                        </label>\r\n                        <input type=\"submit\" value=\"Submit PV System Data\" />\r\n                    </form>\r\n                    <br/>\r\n                    <div className=\"calculated-values-container\">\r\n                        <h2>Battery Size</h2>\r\n                        <div className=\"value-group\">\r\n                            <p>Minimum: {batterySize.minimum} kWh</p>\r\n                            <p>Short Term: {batterySize.BS_SHORT} kWh</p>\r\n                            <p>Mid Term: {batterySize.BS_MID} kWh</p>\r\n                        </div>\r\n                        <h2>Battery Cost</h2>\r\n                        <div className=\"value-group\">\r\n                            <p>Minimum: ${batterySize.m_cost}</p>\r\n                            <p>Short Term: ${batterySize.CS_SHORT}</p>\r\n                            <p>Mid Term: ${batterySize.CS_MID}</p>\r\n                        </div>\r\n                    </div>\r\n    \r\n                    <div className=\"calculated-values-container\">\r\n                        <h2>PV System Size</h2>\r\n                        <div className=\"value-group\">\r\n                            <p>Minimum: {pvSystemSize.minimum} kW</p>\r\n                            <p>Short Term: {pvSystemSize.PVSS_SHORT} kW</p>\r\n                            <p>Mid Term: {pvSystemSize.PVSS_MID} kW</p>\r\n                        </div>\r\n                        <h2>PV System Cost</h2>\r\n                        <div className=\"value-group\">\r\n                            <p>Minimum: ${pvSystemSize.PV_min}</p>\r\n                            <p>Short Term: ${pvSystemSize.PVSC_SHORT}</p>\r\n                            <p>Mid Term: ${pvSystemSize.PVSC_MID}</p>\r\n                        </div>\r\n                    </div>\r\n    \r\n                    {/* Progress bars for comparing budget with costs */}\r\n                    <div className=\"progress-bars-container\">\r\n                        <h2>Progress Bars</h2>\r\n                        <div className=\"progress-bar\">\r\n                        <span>  Minimum Battery Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, batterySize.m_cost)}%`, backgroundColor: calculatePercentageDifference(budget, batterySize.m_cost) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{calculatePercentageDifference(budget, batterySize.m_cost)}%</span>\r\n                        </div>\r\n                        <div className=\"progress-bar\">\r\n                        <span className=\"see\">  Short Term Battery Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, batterySize.CS_SHORT)}%`, backgroundColor: calculatePercentageDifference(budget, batterySize.CS_SHORT) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span className=\"see\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{calculatePercentageDifference(budget, batterySize.CS_SHORT)}%</span>\r\n                        </div>\r\n                        <div className=\"progress-bar\">\r\n                        <span>  Mid Term Battery Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, batterySize.CS_MID)}%`, backgroundColor: calculatePercentageDifference(budget, batterySize.CS_MID) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span className=\"see\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{calculatePercentageDifference(budget, batterySize.CS_MID)}%</span>\r\n                        </div>\r\n                        <div className=\"progress-bar\">\r\n                        <span>  Minimum PV System Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, pvSystemSize.PV_min)}%`, backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PV_min) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span>{calculatePercentageDifference(budget, pvSystemSize.PV_min)}%</span>\r\n                        </div>\r\n                        <div className=\"progress-bar\">\r\n                        <span>  Short Term PV System Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT)}%`, backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span>{calculatePercentageDifference(budget, pvSystemSize.PVSC_SHORT)}%</span>\r\n                        </div>\r\n                        <div className=\"progress-bar\">\r\n                        <span>  Mid Term PV System Cost</span>\r\n                        <div className=\"progress\">\r\n                            <div \r\n                            className=\"progress-fill\" \r\n                            style={{ width: `${calculatePercentageDifference(budget, pvSystemSize.PVSC_MID)}%`, backgroundColor: calculatePercentageDifference(budget, pvSystemSize.PVSC_MID) >= 50 ? 'blue' : 'red' }}\r\n                            ></div>\r\n                        </div>\r\n                        <span>{calculatePercentageDifference(budget, pvSystemSize.PVSC_MID)}%</span>\r\n                        </div>\r\n                    </div>\r\n                </>\r\n            ) : (\r\n                <p>Waiting for the elements...</p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProjectDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}